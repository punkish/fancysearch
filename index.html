<!doctype html>
<head>
    <title>fancy search</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/fancysearch.css">
    <link rel="stylesheet" href="JavaScript-autoComplete/auto-complete.css">
</head>

<body>

<div class="container">
    <div class="row">
        <div class="twelve columns">
            <h1>Multifaceted Search Interface</h1>
            <h4>Simple Search</h4>
            <input class="u-full-width" type="search" placeholder="search for anything">
            <button disabled>Go</button>
            <br clear="both">

            <p>You are very proud of the above. But your client asks you to allow searching with more granular parameters such as countries and multiple authors besides free text. You end up with…</p>
        </div>
    </div>

    
    <div class="row">
        <div class="twelve columns">
            <h4>Ghastly Search</h4>
            <input class="u-full-width" type="search" placeholder="free text">
        </div>
    </div>
    <div class="row">
        <div class="six columns" id="au"></div>
        <div class="six columns" id="cn"></div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <button disabled>Go</button>
        </div>

        <p class="u-cf">You should be ashamed of the above. Instead, try…</p>
    </div>

            
    <div class="row">
        <div class="twelve columns">
            <h4>Fancy Search</h4>
        
            <p>Faceted search for multiple keys and values</p>
            <form method="GET" action="/search">
                <div id="fs" class="fs"></div>
                <button class="button-primary" id="go">Go</button>
            </form>

<pre class="u-cf"><code id="qs" class="off"></code></pre>

    <div class="row" style="height: 200px;"></div>
</div>

<script src="JavaScript-autoComplete/auto-complete.js"></script>
<script src="js/fancysearch.js"></script>
<script src="js/facets.js"></script>
<script type="text/javascript">
const fillGhastly = function(selector, facet, choices, multiple) {

    let html = multiple ? 
        `<select data-placeholder="${facet}…" class="u-full-width" multiple size="3" style="height: 70px;">` : 
        `<select data-placeholder="${facet}…" class="u-full-width">`;

    for (let i = 0, j = choices.length; i < j; i++) {
        html += `<option>${choices[i]}</option>`
    }
    html += '</select>';
    selector.innerHTML = html;
};

const fs = document.getElementById('fs');
const go = document.getElementById('go');
const qs = document.getElementById('qs');

window.onload = function() {

    const au = document.getElementById('au');
    const cn = document.getElementById('cn');
    fillGhastly(au, 'authors', facets[1]['values'], true);
    fillGhastly(cn, 'countries', facets[2]['values'], false);

    fancySearch(fs, go, facets);
};
</script>
</body>
</html>
